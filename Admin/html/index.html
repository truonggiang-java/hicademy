<!DOCTYPE html>
<html lang="en" class="light-style layout-menu-fixed" dir="ltr" data-theme="theme-default" data-assets-path="../assets/"
  data-template="vertical-menu-template-free">

<head>
  <meta charset="utf-8" />
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />

  <title>Admin Dashboard</title>

  <meta name="description" content="" />

  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="../assets/img/avatars/logo.png" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
    rel="stylesheet" />

  <!-- Icons. Uncomment required icon fonts -->
  <link rel="stylesheet" href="../assets/vendor/fonts/boxicons.css" />

  <!-- Core CSS -->
  <link rel="stylesheet" href="../assets/vendor/css/core.css" class="template-customizer-core-css" />
  <link rel="stylesheet" href="../assets/vendor/css/theme-default.css" class="template-customizer-theme-css" />
  <link rel="stylesheet" href="../assets/css/demo.css" />

  <!-- Vendors CSS -->
  <link rel="stylesheet" href="../assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css" />

  <link rel="stylesheet" href="../assets/vendor/libs/apex-charts/apex-charts.css" />

  <!-- Modal -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

  <!-- Helpers -->
  <script src="../assets/vendor/js/helpers.js"></script>
  <!-- Icons -->
  <script src="https://kit.fontawesome.com/af1dffc13d.js" crossorigin="anonymous"></script>
  <!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
  <!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
  <script src="../assets/js/config.js"></script>
  <style>
    #chartdiv {
      width: 100%;
      height: 350px;
    }
    #backgroundImage{
      
      animation: gradient-move 15s linear infinite;
    }
    @keyframes gradient-move {
      0%,100%  {background-image: url("https://png.pngtree.com/thumb_back/fw800/back_our/20190620/ourmid/pngtree-new-school-new-starting-point-creative-exhibition-board-background-material-image_165944.jpg");}
      25% {background-image: url("https://i.pinimg.com/736x/53/f5/7d/53f57d0e78d83eb6ff62cb876df661ba.jpg");}
      50% {background-image: url("https://png.pngtree.com/thumb_back/fh260/background/20190223/ourmid/pngtree-fresh-hand-painted-classroom-advertising-background-backgroundfreshcloudblue-skygrasslandtreeslearnstudent-image_68052.jpg");}
      75% {background-image: url("https://img.pikbest.com/backgrounds/20190306/fresh-cartoon-school-on-the-road-character-school-background_1870339.jpg!bw700");}
    }
    .clock {
    color: #ffff;
    font-size: 50px;
    font-family: Orbitron;
    letter-spacing: 7px;
    }
  </style>
</head>

<body>
  <!-- Layout wrapper -->
  <div class="layout-wrapper layout-content-navbar">
    <div class="layout-container">
      <!-- Menu -->

      <aside id="layout-menu" class="layout-menu menu-vertical menu bg-menu-theme">
        <div class="app-brand demo">
          <a href="index.html" class="app-brand-link">
            <img src="../assets/img/avatars/logo.png" style="width: 30%;">
            <span class="app-brand-text demo menu-text fw-bolder ms-2">HiAcademy</span>
          </a>

          <a href="javascript:void(0);" class="layout-menu-toggle menu-link text-large ms-auto d-block d-xl-none">
            <i class="bx bx-chevron-left bx-sm align-middle"></i>
          </a>
        </div>

        <div class="menu-inner-shadow"></div>

        <ul class="menu-inner py-1">
          <!-- Dashboard -->
          <li class="menu-item active">
            <a href="index.html" class="menu-link">
              <i class="menu-icon fa-solid fa-house"></i>
              <div data-i18n="Analytics">Dashboard</div>
            </a>
          </li>

          <!-- DATA -->
          <li class="menu-header small text-uppercase"><span class="menu-header-text">Data</span></li>

          <!-- Tables -->
          <li class="menu-item">
            <a href="user.html" class="menu-link">
              <i class="menu-icon fa-solid fa-user"></i>
              <div data-i18n="Tables">User</div>
            </a>
          </li>
          <li class="menu-item ">
            <a href="course.html" class="menu-link">
              <i class="menu-icon fa-solid fa-graduation-cap"></i>
              <div data-i18n="Tables">Course</div>
            </a>
          </li>
          <li class="menu-item">
            <a href="lesson.html" class="menu-link">
              <i class="menu-icon fa-solid fa-book-open"></i>
              <div data-i18n="Tables">Lesson</div>
            </a>
          </li>
          <li class="menu-item ">
            <a href="audio.html" class="menu-link">
              <i class="menu-icon fa-solid fa-play"></i>
              <div data-i18n="Tables">Audio</div>
            </a>
          </li>
          <li class="menu-item">
            <a href="image.html" class="menu-link">
              <i class="menu-icon fa-solid fa-image"></i>
              <div data-i18n="Tables">Image</div>
            </a>
          </li>
          <li class="menu-item">
            <a href="card.html" class="menu-link">
              <i class="menu-icon fa-solid fa-clone"></i>
              <div data-i18n="Tables">Card</div>
            </a>
          </li>

          <!-- SUPPORT -->
          <li class="menu-header small text-uppercase"><span class="menu-header-text">SUPPORT</span></li>
          <li class="menu-item">
            <a href="pages-misc-under-maintenance.html" target="_blank" class="menu-link">
              <i class="menu-icon fa-solid fa-circle-info"></i>
              <div data-i18n="Documentation">Documentation</div>
            </a>
          </li>
        </ul>
      </aside>
      <!-- / Menu -->

      <!-- Layout container -->
      <div class="layout-page">
        <!-- Navbar -->

        <nav
          class="layout-navbar container-xxl navbar navbar-expand-xl navbar-detached align-items-center bg-navbar-theme"
          id="layout-navbar">
          <div class="layout-menu-toggle navbar-nav align-items-xl-center me-3 me-xl-0 d-xl-none">
            <a class="nav-item nav-link px-0 me-xl-4" href="javascript:void(0)">
              <i class="bx bx-menu bx-sm"></i>
            </a>
          </div>

          <div class="navbar-nav-right d-flex align-items-center" id="navbar-collapse">
            <!-- Search -->
            <div class="navbar-nav align-items-center">
              <div class="nav-item d-flex align-items-center">
                <i class="bx bx-search fs-4 lh-0"></i>
                <input type="text" class="form-control border-0 shadow-none" placeholder="Search..."
                  aria-label="Search..." />
              </div>
            </div>
            <!-- /Search -->

            <ul class="navbar-nav flex-row align-items-center ms-auto" id="profile-user">
              <!-- User -->

              <!--/ User -->
            </ul>
          </div>
        </nav>

        <!-- / Navbar -->

        <!-- Content wrapper -->
        <div class="content-wrapper">
          <!-- Content -->

          <div class="container-xxl flex-grow-1 container-p-y">
            <div class="row">
              <div class="col-lg-8 mb-4 order-0">
                <div class="card">
                  <div class="d-flex align-items-end row" id="backgroundImage" style="border-radius: 10px;">
                    <div class="col-sm-7">
                      <div class="card-body" id="textPrimary">

                      </div>
                    </div>
                    <div class="col-sm-5 text-center text-sm-left">
                      <div class="card-body  px-md-4" id="imageDashborad" >
                        
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-4 col-md-4 order-1">
                <div class="row">
                  <div class="col-12 mb-4">
                    <div class="card">
                      <div class="card-body" style="border-radius: 10px; background: linear-gradient(DeepSkyBlue, rgb(236, 242, 69));">
                        <div class="d-flex justify-content-between flex-sm-row flex-column gap-3">
                          <div class="d-flex flex-sm-column flex-row align-items-start justify-content-between">
                            <div id="MyClockDisplay" class="clock" onload="showTime()"></div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Total Revenue -->
              <div class="col-12 col-lg-8 order-2 order-md-3 order-lg-2 mb-4">
                <div class="card">
                  <div class="row row-bordered g-0">
                    <div class="col-md-12">
                      <h5 class="card-header m-0 me-2 pb-3">Total Revenue</h5>
                      <div id="chartdiv"></div>
                    </div>
                  </div>
                </div>
              </div>
              <!--/ Total Revenue -->
              <div class="col-12 col-md-8 col-lg-4 order-3 order-md-2">
                <div class="row">
                  <div class="col-6 mb-4">
                    <div class="card">
                      <div class="card-body">
                        <div class="card-title d-flex align-items-start justify-content-between">
                          <div class="avatar flex-shrink-0">
                            <!-- <img src="../assets/img/icons/unicons/paypal.png" alt="Credit Card" class="rounded" /> -->
                            <i class="menu-icon fa-solid fa-play" class="rounded"></i>
                          </div>
                          <div class="dropdown">
                            <button class="btn p-0" type="button" id="cardOpt4" data-bs-toggle="dropdown"
                              aria-haspopup="true" aria-expanded="false">
                              <i class="bx bx-dots-vertical-rounded"></i>
                            </button>
                            <div class="dropdown-menu dropdown-menu-end" aria-labelledby="cardOpt4">
                              <a class="dropdown-item" href="audio.html">View More</a>
                            </div>
                          </div>
                        </div>
                        <span class="d-block mb-1">Audio</span>
                        <h3 class="card-title text-nowrap mb-2">$2,456</h3>
                        <!-- <small class="text-danger fw-semibold"><i class="bx bx-down-arrow-alt"></i> -14.82%</small> -->
                      </div>
                    </div>
                  </div>
                  <div class="col-6 mb-4">
                    <div class="card">
                      <div class="card-body">
                        <div class="card-title d-flex align-items-start justify-content-between">
                          <div class="avatar flex-shrink-0">
                            <!-- <img src="../assets/img/icons/unicons/cc-primary.png" alt="Credit Card" class="rounded" /> -->
                            <i class="menu-icon fa-solid fa-clone" class="rounded"></i>
                          </div>
                          <div class="dropdown">
                            <button class="btn p-0" type="button" id="cardOpt1" data-bs-toggle="dropdown"
                              aria-haspopup="true" aria-expanded="false">
                              <i class="bx bx-dots-vertical-rounded"></i>
                            </button>
                            <div class="dropdown-menu" aria-labelledby="cardOpt1">
                              <a class="dropdown-item" href="card.html">View More</a>
                            </div>
                          </div>
                        </div>
                        <span class="fw-semibold d-block mb-1">Card</span>
                        <h3 class="card-title mb-2">$14,857</h3>
                        <!-- <small class="text-success fw-semibold"><i class="bx bx-up-arrow-alt"></i> +28.14%</small> -->
                      </div>
                    </div>
                  </div>
                  <!-- </div>
                    <div class="row"> -->
                      <div class="col-6 mb-4">
                        <div class="card">
                          <div class="card-body">
                            <div class="card-title d-flex align-items-start justify-content-between">
                              <div class="avatar flex-shrink-0">
                                <!-- <img src="../assets/img/icons/unicons/paypal.png" alt="Credit Card" class="rounded" /> -->
                                <i class="menu-icon fa-solid fa-play" class="rounded"></i>
                              </div>
                              <div class="dropdown">
                                <button class="btn p-0" type="button" id="cardOpt4" data-bs-toggle="dropdown"
                                  aria-haspopup="true" aria-expanded="false">
                                  <i class="bx bx-dots-vertical-rounded"></i>
                                </button>
                                <div class="dropdown-menu dropdown-menu-end" aria-labelledby="cardOpt4">
                                  <a class="dropdown-item" href="audio.html">View More</a>
                                </div>
                              </div>
                            </div>
                            <span class="d-block mb-1">Audio</span>
                            <h3 class="card-title text-nowrap mb-2">$2,456</h3>
                            <!-- <small class="text-danger fw-semibold"><i class="bx bx-down-arrow-alt"></i> -14.82%</small> -->
                          </div>
                        </div>
                      </div>
                      <div class="col-6 mb-4">
                        <div class="card">
                          <div class="card-body">
                            <div class="card-title d-flex align-items-start justify-content-between">
                              <div class="avatar flex-shrink-0">
                                <!-- <img src="../assets/img/icons/unicons/cc-primary.png" alt="Credit Card" class="rounded" /> -->
                                <i class="menu-icon fa-solid fa-clone" class="rounded"></i>
                              </div>
                              <div class="dropdown">
                                <button class="btn p-0" type="button" id="cardOpt1" data-bs-toggle="dropdown"
                                  aria-haspopup="true" aria-expanded="false">
                                  <i class="bx bx-dots-vertical-rounded"></i>
                                </button>
                                <div class="dropdown-menu" aria-labelledby="cardOpt1">
                                  <a class="dropdown-item" href="card.html">View More</a>
                                </div>
                              </div>
                            </div>
                            <span class="fw-semibold d-block mb-1">Card</span>
                            <h3 class="card-title mb-2">$14,857</h3>
                            <!-- <small class="text-success fw-semibold"><i class="bx bx-up-arrow-alt"></i> +28.14%</small> -->
                          </div>
                        </div>
                      </div>
                  
                </div>
              </div>
            </div>
          </div>
          <!-- / Content -->

          <!-- Footer -->
          <footer class="content-footer footer bg-footer-theme">
            <div class="container-xxl d-flex flex-wrap justify-content-between py-2 flex-md-row flex-column">
              <div class="mb-2 mb-md-0">
                ©
                <script>
                  document.write(new Date().getFullYear());
                </script>
                , made with ❤️ by
                <a href="https://www.facebook.com/minhhieu159" target="_blank" class="footer-link fw-bolder">Le Minh
                  Hieu</a>
              </div>
              <div>
                <i class="fa-solid fa-headset"></i>
                <a href="https://www.facebook.com/minhhieu159" target="_blank" class="footer-link me-4">Support</a>
              </div>
            </div>
          </footer>
          <!-- / Footer -->

          <div class="content-backdrop fade"></div>
        </div>
        <!-- Content wrapper -->
      </div>
      <!-- / Layout page -->
    </div>

    <!-- Overlay -->
    <div class="layout-overlay layout-menu-toggle"></div>
  </div>
  <!-- / Layout wrapper -->

  <!-- Core JS -->
  <!-- build:js assets/vendor/js/core.js -->
  <script src="../assets/vendor/libs/jquery/jquery.js"></script>
  <script src="../assets/vendor/libs/popper/popper.js"></script>
  <script src="../assets/vendor/js/bootstrap.js"></script>
  <script src="../assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>

  <script src="../assets/vendor/js/menu.js"></script>
  <!-- endbuild -->

  <!-- Vendors JS -->
  <script src="../assets/vendor/libs/apex-charts/apexcharts.js"></script>

  <!-- Main JS -->
  <script src="../assets/js/main.js"></script>

  <!-- Page JS -->
  <script src="../assets/js/dashboards-analytics.js"></script>

  <!-- Place this tag in your head or just before your close body tag. -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
  <script src="https://cdn.amcharts.com/lib/5/percent.js"></script>
  <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>
  <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
  <script src="https://cdn.amcharts.com/lib/5/percent.js"></script>
  <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js">
  </script>
  <script>
    let cookie = $.cookie("Cookie-admin");
    let myPromise = new Promise(resolve => {
        $.ajax({
          headers: {
            'Authorization': 'Bearer ' + cookie
          },
          method: "GET",
          url: "http://localhost:8080/api/v1/dashborad/list",
          success:function(data){
            resolve(data);
          }
        })
    })
    myPromise.then(value => {

      am5.ready(function () {
  
  
        var root = am5.Root.new("chartdiv");
  
  
        root.setThemes([
          am5themes_Animated.new(root)
        ]);
  
  
        var chart = root.container.children.push(am5percent.PieChart.new(root, {
          startAngle: 180,
          endAngle: 360,
          layout: root.verticalLayout,
          innerRadius: am5.percent(50)
        }));
  
  
        var series = chart.series.push(am5percent.PieSeries.new(root, {
          startAngle: 180,
          endAngle: 360,
          valueField: "value",
          categoryField: "category",
          alignLabels: false
        }));
  
        series.states.create("hidden", {
          startAngle: 180,
          endAngle: 180
        });
  
        series.slices.template.setAll({
          cornerRadius: 5
        });
  
        series.ticks.template.setAll({
          forceHidden: true
        });
  
        // Set data
        // https://www.amcharts.com/docs/v5/charts/percent-charts/pie-chart/#Setting_data
        series.data.setAll(value);
  
        series.appear(1000, 100);
  
      }); // end am5.ready()
    })
    $(document).ready(function () {

      if (!cookie) {
        $("#bodyAdmin").html("");
        window.location.href = "auth-login-basic.html";
      } else if (cookie) {
        $.ajax({
          headers: {
            'Authorization': 'Bearer ' + cookie
          },
          method: "GET",
          url: "http://localhost:8080/api/v1/user/getRoleByToken?token=" + cookie,
          success: function (data) {
            var today = new Date();
            var dd = String(today.getDate()).padStart(2, '0');
            var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
            var yyyy = today.getFullYear();

            today = mm + '/' + dd + '/' + yyyy;

            let textVal = [
              "Chúc bạn một ngày mới vui vẻ, và tràn đầy năng lượng!!!",
              "Lại một ngày nữa rồi. Hãy cố gắng lên nào!!!",
              "Hãy thêm một vài khóa học hoặc bài học tăng tính vui nhộn nào bạn!!!",
              "Hôm nay là ngày: " + today + ".Bạn nên làm gì đó trong trang admin này !!!",
              "Hãy xem trang admin nay có gì"
            ]

            let x = Math.floor((Math.random() * textVal.length));
            let textValue = textVal[x];
            let html = `<li class="nav-item navbar-dropdown dropdown-user dropdown">
                <a class="nav-link dropdown-toggle hide-arrow" href="javascript:void(0);" data-bs-toggle="dropdown">
                  <div class="avatar avatar-online">
                    <img src="${data.linkUrl}" alt class="w-px-40 h-auto rounded-circle" />
                  </div>
                </a>
                <ul class="dropdown-menu dropdown-menu-end">
                  <li>
                    <a class="dropdown-item" href="#">
                      <div class="d-flex" >
                        <div class="flex-shrink-0 me-3">
                          <div class="avatar avatar-online">
                            <img src="${data.linkUrl}" alt class="w-px-40 h-auto rounded-circle" />
                          </div>
                        </div>
                        <div class="flex-grow-1">
                          <span class="fw-semibold d-block">${data.name}</span>
                          <small class="text-muted">${data.role}</small>
                        </div>
                      </div>
                    </a>
                  </li>
                  <li>
                    <div class="dropdown-divider"></div>
                  </li>
                  <li>
                    <a class="dropdown-item logoutAdmin" href="profile-user.html" id="${data.id}">
                      <i class="bx bx-user me-2"></i>
                      <span class="align-middle">My Profile</span>
                    </a>
                  </li>
                  <li>
                    <div class="dropdown-divider"></div>
                  </li>
                  <li>
                    <a class="dropdown-item " href="#" id="logoutAdmin">
                      <i class="bx bx-power-off me-2"></i>
                      <span class="align-middle">Log Out</span>
                    </a>
                  </li>
                </ul>
              </li>`;
            let text = `<h3 class="card-title text-primary" style="color:white !important">Chào mừng bạn ${data.name}! 🎉</h3>
                        <p class="mb-4" style="color:white">
                          ${textValue}
                        </p>`
            let imageDashborad=`<img src="${data.linkUrl}" height="140"
                          alt="View Badge User" style="border-radius:50% ;"/>`
            $("#imageDashborad").html(imageDashborad)
            $("#textPrimary").html(text);
            $("#profile-user").html(html);

          }
        })
      }

      $(document).on('click', '#logoutAdmin', function (e) {
        $.removeCookie("Cookie-admin");
        window.location.href = "auth-login-basic.html";
      })
      
      //clock
      function showTime(){
      var date = new Date();
      var h = date.getHours(); // 0 - 23
      var m = date.getMinutes(); // 0 - 59
      var s = date.getSeconds(); // 0 - 59
      var session = "AM";
      
      if(h == 0){
          h = 12;
      }
      
      if(h > 12){
          h = h - 12;
          session = "PM";
      }
      
      h = (h < 10) ? "0" + h : h;
      m = (m < 10) ? "0" + m : m;
      s = (s < 10) ? "0" + s : s;
      
      var time = h + ":" + m + ":" + s + " " + session;
      document.getElementById("MyClockDisplay").innerText = time;
      document.getElementById("MyClockDisplay").textContent = time;
      setTimeout(showTime, 1000);  
      }
      showTime();
    })
  </script>
</body>

</html>